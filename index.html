<!DOCTYPE html>
<html>
 <head>
  <meta charset="UTF-8">
  <title>Hashtags</title>
  <link rel="stylesheet" href="stylesheet.css" charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
 </head>
 <body>
   <header id="nav">
      <h1 id="logo">#hashTags</h1>
      <div id="login-status"></div>
   </header>
   <div id="form"></div>
   <div id="content"></div>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="vendor/react.min.js"></script>
   <script src="vendor/JSXTransformer.js"></script>
   <script type="text/jsx">
     var SignIn = React.createClass({
       handleClick: function() {
         window.location.replace(
           "https://instagram.com/oauth/authorize/?client_id=2ee58976c7a74d048636a229f797047c&redirect_uri=http://josefdaly.github.io/hashtags/&response_type=token"
         )
       },
       render: function() {
         return (
           <img onClick={this.handleClick} className="instagram-button"
             src="http://www.pictacular.co/img/Instagram_normal.png"
               alt="Instagram login" />
         )
       }
     })

     var HashTagForm = React.createClass({
       render: function() {
         return (
           <div className="hashtag-form center-block">
             <span>Hashtag: </span>
             <input className="total-width" type="text" />
             <br/>
             <span>Start Date: </span>
             <input className="total-width" id="start-date" type="date" />
             <br/>
             <span>End Date: </span>
             <input className="total-width" id="end-date" type="date" />
             <br/>
             <button className="btn btn-default center-block">Load Content!</button>
           </div>
         )
       }
     });


     if (location.hash == "") {
       React.render(
         <SignIn />,
         document.getElementById('login-status')
       )
     } else {
       var authToken = location.hash.slice(14)
       $.ajax({
         url: "https://api.instagram.com/v1/users/self?access_token=" + authToken,
         dataType: "JSON",
         success: function(response) {
           var userInfo = response.data
           $('#login-status').html('<span>Hi ' + userInfo.full_name + '</span>');
           React.render(<HashTagForm />, document.getElementById('form'))
         }.bind(this),
         error: function() {

         }.bind(this)
       })
     }
   </script>
 </body>
</html>
